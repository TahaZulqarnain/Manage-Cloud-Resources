<div class="subnet-card" [formGroup]="group">
  <div class="subnet-header">
    <div class="subnet-title">
      <h4>
        <span class="icon material-symbols-outlined">hub</span>
        Subnet {{ index !== undefined ? index + 1 : '' }}
        <span class="validation-status" [class.valid]="group.valid" [class.invalid]="!group.valid && group.touched">
          {{ group.valid ? '✓' : '✗' }}
        </span>
      </h4>
    </div>
    <button class="btn-remove" (click)="onRemove()" type="button" title="Remove Subnet">
      ×
    </button>
  </div>

  <div class="subnet-body">
    <div class="form-group">
      <label>
        Resource Name <span class="required">*</span>
      </label>
      <input 
        formControlName="name" 
        placeholder="Enter Subnet name"
        class="form-control"
        [class.is-invalid]="isNameInvalid"
        type="text">
      <div class="invalid-feedback" *ngIf="isNameInvalid">
        Resource name is required
      </div>
    </div>

    <div class="form-group">
      <label>
        Resource Type
      </label>
      <input 
        formControlName="type" 
        placeholder="Subnet"
        class="form-control readonly"
        readonly
        type="text">
    </div>

    <app-tag-input 
      [tagsFormArray]="tags" 
      [showTitle]="true"
      title="Tags"
      titleLevel="h5">
    </app-tag-input>

    <div class="nics-section">
      <div class="section-title">
        <h5>
          <span class="icon material-symbols-outlined">cable</span>
          Network Interfaces
          <span class="badge">{{ nicCount }}</span>
        </h5>
      </div>
      <div formArrayName="nics" class="nics-container">
        <div *ngFor="let n of nics.controls; let ni=index" [formGroupName]="ni" class="nic-item-wrapper">
          <app-nic [group]="$any(n)" [index]="ni" (remove)="removeNIC(ni)"></app-nic>
        </div>
        <div class="add-section">
          <button class="btn-add" (click)="addNIC()" type="button">
            <span>+</span> Add NIC
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
